/**
 * 
 */
package entry.xml;

import javax.xml.parsers.DocumentBuilderFactory;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.w3c.dom.Attr;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;

import entry.input.*; 

/**
 * @author aayush
 *
 */
public class xmlGeneration {
	
	static dataStaging ds = new dataStaging();
	static HashMap<String,String> param = ds.getCredentialsFromProperties();
	ArrayList<ColumnMetaData> columnData = ds.getColumnData();
	
	public void creaateXML()
	{
	
			try{
				DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
				DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
				Document doc = dBuilder.newDocument();
				
				//create here
				
				Element rootElement = doc.createElement("Create-Table");
		        doc.appendChild(rootElement);
		        
		        Element connect = doc.createElement("Connection-String");
		        rootElement.appendChild(connect);
		        
		        Attr attr = doc.createAttribute("String");
		        attr.setValue(param.get("connectionstring"));
		        connect.setAttributeNode(attr);
		        
		        Element schema = doc.createElement("Schema");
		        rootElement.appendChild(schema);
		        
		        Attr attr2 = doc.createAttribute("Name");
		        attr.setValue(param.get("schema"));
		        connect.setAttributeNode(attr2);
		        
		        
		        Element user = doc.createElement("username");
		        rootElement.appendChild(user);
		        
		        Attr attr3 = doc.createAttribute("Name");
		        attr.setValue(param.get("username"));
		        connect.setAttributeNode(attr3);
		        
		        Element pass = doc.createElement("Password");
		        rootElement.appendChild(pass);
		        
		        Attr attr4 = doc.createAttribute("Name");
		        attr.setValue(param.get("password"));
		        connect.setAttributeNode(attr4);
		        
		        // global param ends here
		        
		        Iterator it = columnData.iterator();
		        
		        while(it.hasNext()){
		        	
		        	ColumnMetaData cmd = (ColumnMetaData) it.next();
		        	
		        	
		        	
		        }
		        
		        
				
				
				}
			catch(Exception e){
				e.printStackTrace();
			}
	}

}
